rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    // Helper function to check if user is admin based on email
    // Note: For better security, consider using Firebase Custom Claims in production
    function isAdminEmail() {
      return request.auth != null && 
             request.auth.token.email != null &&
             (request.auth.token.email == 'ruben.jim.co@gmail.com');
    }

    // Messages collection
    // - Anyone can create messages (contact form submissions don't require auth)
    // - Only authenticated admins can read and update messages
    match /messages/{messageId} {
      allow create: if true;  // Allow anonymous contact form submissions
      allow read, update, delete: if isAdminEmail();
    }

    // Blog posts collection
    // - Anyone can read blog posts (public viewing)
    // - Only authenticated admins can create, update, or delete blog posts
    match /blogPosts/{postId} {
      allow read: if true;  // Public read access
      allow create, update, delete: if isAdminEmail();
    }
  }
}
